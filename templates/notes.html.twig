{# templates/notes.html.twig #}
{% extends 'base.html.twig' %}

{% block body %}
<div id="topBar" class="p-3 mb-2 bg-primary"></div>
<div id="main" class="row container-fluid h-100 text-white">
    <div id="content" class="col-sm-10 row">
        <div id="editor" class="col-md w-50 h-100">
            <textarea id="textEditor" class="rounded p-3 w-100 h-100 bg-dark text-white"></textarea>
        </div>
        <!--<div id="dragBar" class="h-100"></div>-->
        <div id="preview" class="rounded p-3 mb-2 bg-dark col-md h-100 w-50" style="overflow-wrap:break-word;"></div>
    </div>
    <div id="sideBar" class="col-sm-1">
       <div class="panel-group" role="tablist">
        <div class="panel panel-default">
            <div class="panel-heading bg-primary" role="tab" id="collapseListGroupHeading1">
            <h4 class="panel-title">
                <a class="collapsed" data-toggle="collapse" href="#collapseListGroup1" aria-expanded="false" aria-controls="collapseListGroup1">
                Kategorie 1
                </a>
            </h4>
            </div>
            <div id="collapseListGroup1" class="panel-collapse collapse" role="tabpanel" aria-labelledby="collapseListGroupHeading1">
            <ul class="list-group">
                <li class="list-group-item">Seite 1</li>
                <li class="list-group-item">Seite 2</li>
                <li class="list-group-item">Seite 3</li>
            </ul>
        </div>
        </div>
    </div>
</div>
<script>
    // on page loaded
    $(document).ready(function() {
        // init editor
        // if editor changes, update preview
        let nextSync = 0;
        $("#textEditor").on("input", function () {
            $("#preview").html(marked.parse($("#textEditor").val()));
            if (nextSync < Date.now()) {
                nextSync = Date.now() + 1000;
                $.ajax({
                    url: "/notes/sync",
                    type: "POST",
                    data: {
                        "content": $("#textEditor").val(),
                    }
                });
            }
        });
    });
</script>
<script src="notes.js" type="text/javascript"></script>
<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
{% endblock %}